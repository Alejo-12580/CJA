<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <link rel="shortcut icon" href="img/logoCityHunter.png" type="image/x-icono">
    <link rel="stylesheet" th:href="@{css/styleLogin.css}">
    <header>

        <nav >
            <a th:href="@{/menu}">Inicio</a>
            <a th:href="@{/IniciarSesion}">Iniciar Sesión</a>
            <a th:href="@{/menuST}">Servicio Técnico</a>
            <a href="Tienda">Tienda</a>
        </nav>
    </header>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Formulario Registrarse</title>
</head>
<body>
<section class="form-register">
    <h4>Registro City Hunter</h4>
    <form th:action="@{/saveUser}" th:object="${user}" method="post">
        <input type="hidden" th:field="*{id}">
        <input type="hidden" th:field="*{estado}">
        <input type="hidden" th:field="*{roles.id}">
        <input class="controls" th:field="*{nombre}" type="text" pattern="[\w\d]{3,15}" name="Nombres" id="Nombres" placeholder="Ingrese sus nombres" required>
        <input class="controls" th:field="*{apellido}" type="text" pattern="[\w\d]{3,15}" name="Apellidos" id="Apellidos" placeholder="Ingrese sus apellidos" required>
        <input class="controls" th:field="*{email}" type="email" name="Correo" id="Correo" placeholder="Ingrese su correo" required>
        <input class="controls" th:field="*{direccion}" type="text" pattern=".{5,50}" name="Direccion" id="Direccion" placeholder="Ingrese su direccion" required>
        <input class="controls" th:field="*{telefono}" type="text" pattern="[0-9]{10}" name="Telefono" id="Telefono" placeholder="Ingrese su telefono" required>
        <input class="controls" th:field="*{cedula}" type="text" pattern="[0-9]{11}" name="Cedula" id="Cedula" placeholder="Ingrese su cedula" required>
        <input class="controls" th:field="*{userName}" type="text" pattern=".{3,25}" name="NombreUsuario" id="NombreUsuario" placeholder="Ingrese un nombre de usuario" required>
        <input class="controls" type="password" th:field="*{password}" name="Contraseña" id="password" placeholder="Ingrese su contraseña" required>
        <input class="controls" type="password" th:field="*{passwordConfirm}" name="ConfirmarContraseña" id="confirmarContraseña" placeholder="Confirme su contraseña" required>
        <p>Estoy de acuerdo con <a href="#">Terminos y condiciones</a></p>
        <div th:if="${mensaje !=null}">
            <label th:text="${mensaje}" style="margin-right: 5%;margin-left: 5%;border: 2px solid black"></label>
        </div>
        <input class="botons" type="submit" value="Registrar">
        <p><a href="#">¿Ya tengo cuenta?</a></p>
        <p id="error-message" style="color: red;"></p> <!-- Element to display the error message -->
    </form>
    <script>
        document.querySelector('form').addEventListener('submit', function (event) {
            const passwordInput = document.getElementById('password');
            const confirmPasswordInput = document.getElementById('confirmarContraseña');
            const errorMessage = document.getElementById('error-message');

            if (passwordInput.value !== confirmPasswordInput.value) {
                errorMessage.innerText = 'Las contraseñas no coinciden.';
                event.preventDefault(); // Prevents form submission
            } else {
                errorMessage.innerText = ''; // Clear the error message when passwords match
            }
            if(passwordInput.value.length < 6 && confirmPasswordInput.value.length < 6 ){
                errorMessage.innerText = 'Las contraseñas tiene muy pocos digitos.';
                event.preventDefault();
            } else {
                errorMessage.innerText = ''; // Clear the error message when passwords match
            }
        });
    </script>
</section>

<footer>
    <div class="contenedor-footer">
        <div class="content-foo">
            <h4>Telefono</h4>
            <p>+57 3138832693</p>
        </div>
        <div class="content-foo">
            <h4>email</h4>
            <p>54844</p>
        </div>
        <div class="content-foo">
            <h4>Dirrecion</h4>
            <p>6545454</p>
        </div>
    </div>
    <h2 class="titulo-final">&copy;CityHunterShop | Proyect CJA</h2>
</footer>
</body>
</html>